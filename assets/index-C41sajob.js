var q=Object.defineProperty;var G=(e,t,r)=>t in e?q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var U=(e,t,r)=>G(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();const M=()=>{const e=new Set;return{subscribe:n=>e.add(n),notify:()=>e.forEach(n=>n())}},T=(e,t,r)=>{const{subscribe:n,notify:a}=M();let o={...e};const l=h=>{o={...o,...h},a()},c=()=>({...o}),u=Object.fromEntries(Object.entries(t).map(([h,S])=>[h,(...v)=>l(S(c(),...v))])),H=Object.fromEntries(Object.entries(r).map(([h,S])=>[h,(...v)=>S(c(),...v)]));return{getState:c,setState:l,subscribe:n,actions:u,selectors:H}},B=(e,t=window.localStorage)=>({get:()=>JSON.parse(t.getItem(e)),set:o=>t.setItem(e,JSON.stringify(o)),reset:()=>t.removeItem(e)}),V=e=>{const t="/front_5th_chapter1-2",{subscribe:r,notify:n}=M(),a=()=>window.location.pathname.replace(new RegExp(`^${t}`),""),o=()=>e[a()],l=c=>{const u=`${t}${c}`;window.history.pushState(null,null,u),n()};return window.addEventListener("popstate",()=>n()),{get path(){return a()},push:l,subscribe:r,getTarget:o}};function J(e){return!(typeof e=="boolean"&&e===!1||e==null)}function s(e,t,...r){return{type:e,props:t,children:r.flat(1/0).filter(J)}}const m=new Map,L=new Map;function R(e){L.forEach((t,r)=>{e.removeEventListener(r,t)}),L.clear(),m.forEach((t,r)=>{const n=a=>{if(!t.has(a.target))return;t.get(a.target).forEach(l=>l(a))};e.addEventListener(r,n),L.set(r,n)})}function j(e,t,r){m.has(t)||m.set(t,new Map);const n=m.get(t);n.has(e)||n.set(e,new Set),n.get(e).add(r)}function z(e,t,r){if(!m.has(t))return;const n=m.get(t);n.has(e)&&n.get(e).delete(r)}function d(e){if(e==null||typeof e=="boolean")return document.createTextNode("");if(typeof e=="string"||typeof e=="number")return document.createTextNode(e);if(Array.isArray(e)){const r=document.createDocumentFragment();return e.map(d).forEach(a=>r.appendChild(a)),r}const t=document.createElement(e.type);return e.props&&K(t,e.props),e.children&&Array.isArray(e.children)&&e.children.map(d).forEach(n=>t.appendChild(n)),t}function K(e,t){Object.keys(t).forEach(r=>{if(typeof t[r]=="function"){const n=r.replace(/^on/i,"").toLowerCase();j(e,n,t[r]);return}if(r==="className"){e.setAttribute("class",t[r]);return}e.setAttribute(r,t[r])})}function k(e){if(e==null||typeof e=="boolean")return"";if(typeof e=="string"||typeof e=="number")return String(e);if(e.children&&(e.children=e.children.map(k).filter(Boolean)),typeof e.type=="function"){const t=k(e.type(e.props??{}));return{...t,children:[...t.children??[],...e.children]}}return e}function W(e,t,r){for(const[n,a]of Object.entries(t??{}))if(r[n]!==t[n]){if(typeof t[n]=="function"){j(e,n,t[n]);continue}if(n==="className"){e.setAttribute("class",a);continue}e.setAttribute(n,a)}for(const n of Object.keys(r??{}))if(t[n]===void 0){if(typeof r[n]=="function"){const a=n.replace(/^on/i,"").toLowerCase();z(e,a,r[n]);continue}if(n==="className"){e.removeAttribute("class");continue}e.removeAttribute(n)}}function O(e,t,r,n=0){var o,l;if(!t&&r)return e.removeChild(e.childNodes[n]);if(t&&!r)return e.appendChild(d(t));if(typeof t=="string"&&typeof r=="string")return t===r?void 0:e.replaceChild(d(t),e.childNodes[n]);if(t.type!==r.type)return e.replaceChild(d(t),e.childNodes[n]);W((o=e==null?void 0:e.childNodes)==null?void 0:o[n],t.props??{},r.props??{});const a=Math.max(((t==null?void 0:t.children)??[]).length,((r==null?void 0:r.children)??[]).length);for(let c=0;c<a;c++)O((l=e==null?void 0:e.childNodes)==null?void 0:l[n],((t==null?void 0:t.children)??[])[c],((r==null?void 0:r.children)??[])[c],c)}const N=new WeakMap;function Y(e,t){const r=k(e),n=N.get(t);n?O(t,r,n):t.appendChild(d(r)),N.set(t,r),R(t)}const Q=1e3,D=Q*60,E=D*60,X=E*24,Z=e=>{const t=Date.now()-e;return t<D?"방금 전":t<E?`${Math.floor(t/D)}분 전`:t<X?`${Math.floor(t/E)}시간 전`:new Date(e).toLocaleString()},g=B("user"),_=e=>Math.max(...e,0)+1,ee=(e,t)=>e.filter(r=>r!==t),te=(e,t)=>[...e,t],re=1e3,b=re*60,se=b*60,i=T({currentUser:g.get(),posts:[{id:1,author:"홍길동",time:Date.now()-5*b,content:"오늘 날씨가 정말 좋네요. 다들 좋은 하루 보내세요!",likeUsers:[]},{id:2,author:"김철수",time:Date.now()-15*b,content:"새로운 프로젝트를 시작했어요. 열심히 코딩 중입니다!",likeUsers:[]},{id:3,author:"이영희",time:Date.now()-30*b,content:"오늘 점심 메뉴 추천 받습니다. 뭐가 좋을까요?",likeUsers:[]},{id:4,author:"박민수",time:Date.now()-30*b,content:"주말에 등산 가실 분 계신가요? 함께 가요!",likeUsers:[]},{id:5,author:"정수연",time:Date.now()-2*se,content:"새로 나온 영화 재미있대요. 같이 보러 갈 사람?",likeUsers:[]}],error:null},{logout(e){return g.reset(),{...e,currentUser:null}},createPost(e,t){if(!e.currentUser)return{...e};const r=e.posts.map(a=>a.id),n={id:_(r),author:e.currentUser.username,time:Date.now(),content:t,likeUsers:[]};return{...e,posts:[n,...e.posts]}},toggleLikePost(e,t){if(!e.currentUser)return{...e};const r=e.posts.map(n=>{if(n.id!==t)return n;const a=e.currentUser.username,o=n.likeUsers.includes(e.currentUser.username);return{...n,likeUsers:o?ee(n.likeUsers,a):te(n.likeUsers,a)}});return{...e,posts:r}}},{hasLikedPost:(e,t)=>{var r;return e.currentUser?((r=e.posts.find(n=>n.id===t))==null?void 0:r.likeUsers.includes(e.currentUser.username))??!1:!1},loggedIn:e=>!!e.currentUser}),ne=({id:e,author:t,time:r,content:n,likeUsers:a,activationLike:o=!1})=>{const{loggedIn:l}=i.selectors,{toggleLikePost:c}=i.actions,u=()=>{if(!l()){alert("로그인 후 이용해주세요");return}c(e)};return s("div",{className:"bg-white rounded-lg shadow p-4 mb-4"},s("div",{className:"flex items-center mb-2"},s("div",null,s("div",{className:"font-bold"},t),s("div",{className:"text-gray-500 text-sm"},Z(r)))),s("p",null,n),s("div",{className:"mt-2 flex justify-between text-gray-500"},s("span",{className:`like-button cursor-pointer${o?" text-blue-500":""}`,onClick:u},"좋아요 ",a.length),s("span",null,"댓글"),s("span",null,"공유")))},ae=()=>{const{createPost:e}=i.actions;return s("div",{className:"mb-4 bg-white rounded-lg shadow p-4"},s("textarea",{id:"post-content",placeholder:"무슨 생각을 하고 계신가요?",className:"w-full p-2 border rounded"}),s("button",{id:"post-submit",className:"mt-2 bg-blue-600 text-white px-4 py-2 rounded",onClick:r=>{const n=r.target.previousSibling,a=n.value.trim();a&&(e(a),n.value="")}},"게시"))},C=()=>s("header",{className:"bg-blue-600 text-white p-4 sticky top-0"},s("h1",{className:"text-2xl font-bold"},"항해플러스")),$=()=>s("footer",{className:"bg-gray-200 p-4 text-center"},s("p",null,"© $",new Date().getFullYear()," 항해플러스. All rights reserved.")),f={value:null,get(){return this.value},set(e){this.value=e}},I=e=>f.get().path===e?"text-blue-600 font-bold":"text-gray-600";function P({onClick:e,children:t,...r}){return s("a",{onClick:a=>{a.preventDefault(),e==null||e(),f.get().push(a.target.href.replace(window.location.origin,""))},...r},t)}const F=()=>{const{loggedIn:e}=i.selectors,{logout:t}=i.actions;return s("nav",{className:"bg-white shadow-md p-2 sticky top-14"},s("ul",{className:"flex justify-around"},s("li",null,s(P,{href:"/",className:I("/")},"홈")),!e()&&s("li",null,s(P,{href:"/login",className:I("/login")},"로그인")),e()&&s("li",null,s(P,{href:"/profile",className:I("/profile")},"프로필")),e()&&s("li",null,s("a",{href:"#",id:"logout",className:"text-gray-600",onClick:r=>{r.preventDefault(),t()}},"로그아웃"))))},oe=()=>{const{posts:e}=i.getState(),{loggedIn:t,hasLikedPost:r}=i.selectors;return s("div",{className:"bg-gray-100 min-h-screen flex justify-center"},s("div",{className:"max-w-md w-full"},s(C,null),s(F,null),s("main",{className:"p-4"},t()&&s(ae,null),s("div",{id:"posts-container",className:"space-y-4"},[...e].sort((n,a)=>a.time-n.time).map(n=>s(ne,{...n,activationLike:r(n.id)})))),s($,null)))};function le(e){const t={username:e,email:"",bio:""};i.setState({currentUser:t}),g.set(t)}const ce=()=>s("div",{className:"bg-gray-100 flex items-center justify-center min-h-screen"},s("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md"},s("h1",{className:"text-2xl font-bold text-center text-blue-600 mb-8"},"항해플러스"),s("form",{id:"login-form",onSubmit:t=>{t.preventDefault();const r=document.getElementById("username").value;le(r)}},s("input",{type:"text",id:"username",placeholder:"사용자 이름",className:"w-full p-2 mb-4 border rounded",required:!0}),s("input",{type:"password",placeholder:"비밀번호",className:"w-full p-2 mb-6 border rounded",required:!0}),s("button",{type:"submit",className:"w-full bg-blue-600 text-white p-2 rounded"},"로그인")),s("div",{className:"mt-4 text-center"},s("a",{href:"#",className:"text-blue-600 text-sm"},"비밀번호를 잊으셨나요?")),s("hr",{className:"my-6"}),s("div",{className:"text-center"},s("button",{className:"bg-green-500 text-white px-4 py-2 rounded"},"새 계정 만들기")))),ie=()=>s("main",{className:"bg-gray-100 flex items-center justify-center min-h-screen"},s("div",{className:"bg-white p-8 rounded-lg shadow-md w-full text-center",style:"max-width: 480px"},s("h1",{className:"text-2xl font-bold text-blue-600 mb-4"},"항해플러스"),s("p",{className:"text-4xl font-bold text-gray-800 mb-4"},"404"),s("p",{className:"text-xl text-gray-600 mb-8"},"페이지를 찾을 수 없습니다"),s("p",{className:"text-gray-600 mb-8"},"요청하신 페이지가 존재하지 않거나 이동되었을 수 있습니다."),s("a",{href:"/","data-link":"",className:"bg-blue-600 text-white px-4 py-2 rounded font-bold"},"홈으로 돌아가기")));function ue(e){const t={...i.getState().currentUser,...e};i.setState({currentUser:t}),g.set(t),alert("프로필이 업데이트되었습니다.")}const fe=()=>{const{currentUser:e}=i.getState(),{loggedIn:t}=i.selectors,{username:r="",email:n="",bio:a=""}=e??{},o=l=>{l.preventDefault();const c=new FormData(l.target),u=Object.fromEntries(c);ue(u)};return s("div",{className:"bg-gray-100 min-h-screen flex justify-center"},s("div",{className:"max-w-md w-full"},s(C,null),s(F,{loggedIn:t()}),s("main",{className:"p-4"},s("div",{className:"bg-white p-8 rounded-lg shadow-md"},s("h2",{className:"text-2xl font-bold text-center text-blue-600 mb-8"},"내 프로필"),s("form",{id:"profile-form",onSubmit:o},s("div",{className:"mb-4"},s("label",{for:"username",className:"block text-gray-700 text-sm font-bold mb-2"},"사용자 이름"),s("input",{type:"text",id:"username",name:"username",className:"w-full p-2 border rounded",value:r,required:!0})),s("div",{className:"mb-4"},s("label",{for:"email",className:"block text-gray-700 text-sm font-bold mb-2"},"이메일"),s("input",{type:"email",id:"email",name:"email",className:"w-full p-2 border rounded",value:n,required:!0})),s("div",{className:"mb-6"},s("label",{for:"bio",className:"block text-gray-700 text-sm font-bold mb-2"},"자기소개"),s("textarea",{id:"bio",name:"bio",rows:"4",className:"w-full p-2 border rounded"},a)),s("button",{type:"submit",className:"w-full bg-blue-600 text-white p-2 rounded font-bold"},"프로필 업데이트")))),s($,null)))},y=class y extends Error{constructor(){super(y.MESSAGE)}};U(y,"MESSAGE","ForbiddenError");let p=y;const w=class w extends Error{constructor(){super(w.MESSAGE)}};U(w,"MESSAGE","UnauthorizedError");let x=w;function A(){const e=f.get().getTarget()??ie,t=document.querySelector("#root");try{Y(s(e,null),t)}catch(r){if(r instanceof p){f.get().push("/");return}if(r instanceof x){f.get().push("/login");return}console.error(r)}}f.set(V({"/":oe,"/login":()=>{const{loggedIn:e}=i.selectors;if(e())throw new p;return s(ce,null)},"/profile":()=>{const{loggedIn:e}=i.selectors;if(!e())throw new x;return s(fe,null)}}));function me(){f.get().subscribe(A),i.subscribe(A),A()}me();
